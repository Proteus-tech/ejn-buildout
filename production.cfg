[buildout]
extends =
    config/base.cfg
    config/haproxy.cfg

parts +=
    zeoserver
    instance1
    instance2
    instance3
    instance4
    supervisor


[config]
instance1-address = 9080
instance2-address = 9081
instance3-address = 9082
instance4-address = 9083
zeo-address = 9100


[supervisor]
recipe = collective.recipe.supervisor
plugins = superlance
http-socket = unix
file = ${buildout:directory}/var/supervisord.sock
programs =
    10 zeoserver ${zeoserver:location}/bin/runzeo ${zeoserver:location}
    100 instance1 ${buildout:directory}/bin/instance1 [console] ${instance1:location} true
    110 instance2 ${buildout:directory}/bin/instance2 [console] ${instance2:location} true
    120 instance3 ${buildout:directory}/bin/instance3 [console] ${instance3:location} true
    130 instance4 ${buildout:directory}/bin/instance4 [console] ${instance4:location} true
